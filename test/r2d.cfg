process R2D = {

  untracked PSet maxEvents = {untracked int32 input = -100}

# source = PoolSource { untracked vstring fileNames = {'file:rawdata.root' } }
  source = NewEventStreamFileReader { untracked vstring fileNames ={ 
  'file:input.dat' 
  } }


  # cabling
  include "EventFilter/RPCRawToDigi/data/RPCSQLiteCabling.cfi"
  include "EventFilter/RPCRawToDigi/data/rpcUnpacker.cfi"
  replace rpcunpacker.doSynchro = true 

  service = MessageLogger {
#      untracked vstring destinations = {"r2d.log"}
#      untracked PSet r2d.log = { untracked string threshold = "FATAL"}
#      untracked PSet r2d.log = { untracked string threshold = "ERROR"}
#      untracked PSet r2d.log = { untracked string threshold = "DEBUG"}
#      untracked PSet r2d.log = { untracked string threshold = "INFO"}
      untracked vstring debugModules = { "rpcunpacker"}
      untracked vstring destinations = {"cout"} 
      untracked PSet cout = { untracked string threshold = "INFO"}
  }

  module out = PoolOutputModule {
      untracked string fileName ="digis2.root"
      untracked vstring outputCommands = { "drop *", "keep *_rpcunpacker_*_*" }
  }

  module rpcrawanalyser = RPCRawAnalyser { }
	
  path p = {rpcunpacker, rpcrawanalyser} 
  endpath e = {out }
}
